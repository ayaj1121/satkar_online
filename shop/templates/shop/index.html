{% extends "shop/basic.html" %}

{% load static%}
{% load tags %}

    {% block title %}
        Shop
    {% endblock title %}
    {% block index_category_style %}
    <link rel="stylesheet" href="{% static 'shop/css/index.css' %}">
    <style>
            .container{
                max-width: 100%;
            }

                {% comment %} .col-sm-3{
                    min-width: 16%;
                }   {% endcomment %}

                   
    </style>
    {% endblock index_category_style %}

</head>


{% block index_category %}

{% for i,n in iter %}

    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h2>Trending Products in <b> {{i.0.desc}}</b></h2>
                <div id="myCarousel{{n}}" class="carousel slide" data-ride="carousel" data-interval="0">
                    <!-- Carousel indicators -->
                    <ol class="carousel-indicators">
                        {% for s in slides|returnitem:n %}     
                        {% if s == 0 %}
                        <li data-target="#myCarousel{{n}}" data-slide-to="{{s}}" class="active"></li>
                        {% else %}
                        <li data-target="#myCarousel{{n}}" data-slide-to="{{s}}"></li>
                        {% endif %}
                        {% endfor %}
                        
                    </ol>
                    <!-- Wrapper for carousel items -->
                    <div class="carousel-inner">
                        {% for product in i %}
                        {% if forloop.counter <= 6 %}
                        
                        {% if forloop.counter|modulo:6 == 1 %}
                        <div class="carousel-item active">
                            <div class="row p-5">
                                {% endif %}
                                <div class="col-lg-2 col-md-4">
                                    <div class="thumb-wrapper">
                                        <div class="img-box">
                                            <img src="https://satkar.s3.us-east-2.amazonaws.com/{{product.img}}" class="img-fluid" alt="">
                                        </div>
                                        <div class="thumb-content">
                                            <h4>{{product.product_name}}</h4>
                                            <p class="item-price"><strike>$315.00</strike> <span>$250.00</span></p>
                                            <div class="star-rating">
                                                <ul class="list-inline">
                                                    <li class="list-inline-item"><i class="fa fa-star"></i></li>
                                                    <li class="list-inline-item"><i class="fa fa-star"></i></li>
                                                    <li class="list-inline-item"><i class="fa fa-star"></i></li>
                                                    <li class="list-inline-item"><i class="fa fa-star-o"></i></li>
                                                    <li class="list-inline-item"><i class="fa fa-star-o"></i></li>
                                                </ul>
                                            </div>
                                            <button id="{{product.product_id}}" href="#" class="btn btn-primary" onclick="cartclick(this.id)">Add to Cart</button>
                                        </div>
                                    </div>
                                </div>
                            {% if forloop.counter|modulo:6 == 0 %}  
                            </div>
                        </div>
                        {% endif %}
                        {% endif %}
                        {% endfor %}

                        {% for product in i %}
                        {% if forloop.counter >= 7 %}
                        {% if forloop.counter|modulo:6 == 1 %}            
                        <div class="carousel-item">
                            <div class="row p-5">
                            {% endif %}
                                <div class="col-lg-2 col-md-3">
                                    <div class="thumb-wrapper">
                                        <div class="img-box">
                                            <img src="https://satkar.s3.us-east-2.amazonaws.com/{{product.img}}" class="img-fluid" alt="">
                                        </div>
                                        <div class="thumb-content">
                                            <h4>{{product.product_name}}</h4>
                                            <p class="item-price"><strike>$350.00</strike> <span>$330.00</span></p>
                                            <div class="star-rating">
                                                <ul class="list-inline">
                                                    <li class="list-inline-item"><i class="fa fa-star"></i></li>
                                                    <li class="list-inline-item"><i class="fa fa-star"></i></li>
                                                    <li class="list-inline-item"><i class="fa fa-star"></i></li>
                                                    <li class="list-inline-item"><i class="fa fa-star"></i></li>
                                                    <li class="list-inline-item"><i class="fa fa-star-o"></i></li>
                                                </ul>
                                            </div>
                                            <button  id="{{product.product_id}}" href="#" class="btn btn-primary" onclick="cartclick(this.id)">Add to Cart</button>
                                        </div>
                                    </div>
                                </div>
                                {% if forloop.counter|modulo:6 == 0 %}
                            </div>
                        </div>
                        {% endif %}
                        {% endif %}
                        {% endfor %}
                    </div>
                    <!-- Carousel controls -->
                </div>
                    
                    <a class="carousel-control-prev" href="#myCarousel{{n}}" data-slide="prev">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a class="carousel-control-next" href="#myCarousel{{n}}" data-slide="next">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </div>
        </div>
    </div>
    
{% endfor %}

{% endblock index_category %}

{% block cart_script %}
<script>

    if(localStorage.getItem('cart')==null){
            var cart={}
        }
        else{
            cart=JSON.parse(localStorage.getItem('cart'))
        }
    function cartclick(id) {
        id=id.toString()
        if(cart[id]!=undefined){
            cart[id]=cart[id]+1
        }
        else{
            cart[id]=1
        }
        console.log(cart)
        console.log(Object.keys(cart).length)
    }

</script>
{% endblock cart_script %}